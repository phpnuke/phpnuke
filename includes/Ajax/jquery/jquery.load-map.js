(function($){$.fn.load_map=function(options)
{var map_settings={initLat:32.29,initLng:54.62,initZoom:4,maptypeid:google.maps.MapTypeId.ROADMAP,marker:{active:!0,initLat:36.28795445718431,initLng:59.61575198173523,draggable:!0,raiseOnDrag:!0,animation:google.maps.Animation.DROP,icon:"images/marker.png",title:"",input_dragend:"map_position",infowindow:"موقعيت شما",}};if(options){$.extend(!0,map_settings,options)};var self=this;var latlng=new google.maps.LatLng(map_settings.initLat,map_settings.initLng);var myOptions={zoom:map_settings.initZoom,center:latlng,mapTypeId:map_settings.maptypeid};var map=new google.maps.Map(document.getElementById(self.selector.replace(/[#|\.]/g,'')),myOptions);if(map_settings.marker.active)
{var marker_latlng=new google.maps.LatLng(map_settings.marker.initLat,map_settings.marker.initLng);var marker=new google.maps.Marker({position:marker_latlng,draggable:map_settings.marker.draggable,raiseOnDrag:map_settings.marker.raiseOnDrag,animation:map_settings.marker.animation,map:map,labelAnchor:new google.maps.Point(22,0),labelClass:"labels",labelStyle:{opacity:0.55},icon:map_settings.marker.icon,title:map_settings.marker.title});google.maps.event.addListener(marker,'dragend',function(marker){var latLng=marker.latLng;currentLatitude=latLng.lat();currentLongitude=latLng.lng();$("#"+map_settings.marker.input_dragend).val(currentLatitude+","+currentLongitude)});var infowindow=new google.maps.InfoWindow({content:map_settings.marker.infowindow});google.maps.event.addListener(marker,'click',function(){infowindow.open(map,marker)})}}})(jQuery)